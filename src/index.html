<!DOCTYPE html>
<html lang="id">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Share your stories with location on an interactive map. Create, explore, and connect through shared experiences."
    />
    <meta name="theme-color" content="#3498db" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="apple-mobile-web-app-title" content="Story Map" />

    <link rel="shortcut icon" href="/favicon.png" />
    <link rel="manifest" href="/manifest.json" />
    <link rel="apple-touch-icon" href="/images/icon-192x192.png" />

    <title>Story Map - Share Your Stories</title>

    <!-- Leaflet CSS -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""
    />

    <link rel="stylesheet" href="styles/styles.css" />

    <!-- Leaflet JS -->
    <script
      src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
      integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
      crossorigin=""
    ></script>

    <script type="module" src="/scripts/index.js"></script>
  </head>
  <body>
    <!-- Offline indicator -->
    <div id="offline-indicator" class="offline-indicator" style="display: none">
      <svg
        width="16"
        height="16"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
      >
        <line x1="1" y1="1" x2="23" y2="23"></line>
        <path d="M16.72 11.06A10.94 10.94 0 0 1 19 12.55"></path>
        <path d="M5 12.55a10.94 10.94 0 0 1 5.17-2.39"></path>
        <path d="M10.71 5.05A16 16 0 0 1 22.58 9"></path>
        <path d="M1.42 9a15.91 15.91 0 0 1 4.7-2.88"></path>
        <path d="M8.53 16.11a6 6 0 0 1 6.95 0"></path>
        <line x1="12" y1="20" x2="12.01" y2="20"></line>
      </svg>
      <span>You are offline - Showing cached data</span>
    </div>

    <header class="app-header">
      <div class="header-content">
        <a href="#/" class="brand-link">
          <h1>Story Map</h1>
        </a>

        <nav class="main-nav">
          <ul class="nav-links">
            <li><a href="#/">Home</a></li>
            <li><a href="#/map">Map</a></li>
            <li><a href="#/about">About</a></li>
          </ul>
        </nav>

        <div id="user-section" class="user-section">
          <button
            id="install-btn"
            class="btn-install"
            style="display: none"
            aria-label="Install app"
            title="Install Story Map"
          >
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="7 10 12 15 17 10"></polyline>
              <line x1="12" y1="15" x2="12" y2="3"></line>
            </svg>
            <span>Install App</span>
          </button>

          <button
            id="notification-btn"
            class="btn-notification"
            style="display: none"
            aria-label="Toggle notifications"
            title="Notifications"
          >
            <svg
              class="icon-bell"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
              <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
            </svg>
            <svg
              class="icon-bell-off"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              style="display: none"
            >
              <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
              <path d="M18.63 13A17.89 17.89 0 0 1 18 8"></path>
              <path d="M6.26 6.26A5.86 5.86 0 0 0 6 8c0 7-3 9-3 9h14"></path>
              <path d="M18 8a6 6 0 0 0-9.33-5"></path>
              <line x1="1" y1="1" x2="23" y2="23"></line>
            </svg>
          </button>

          <button
            id="sync-btn"
            class="btn-sync"
            style="display: none"
            aria-label="Sync pending stories"
            title="Sync pending stories"
          >
            <svg
              class="icon-sync"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <polyline points="23 4 23 10 17 10"></polyline>
              <polyline points="1 20 1 14 7 14"></polyline>
              <path
                d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"
              ></path>
            </svg>
            <span class="sync-badge" id="sync-badge" style="display: none"
              >0</span
            >
          </button>

          <div id="user-profile" class="user-profile" style="display: none">
            <img
              id="user-avatar"
              class="user-avatar"
              src=""
              alt="User Avatar"
            />
            <span id="user-name" class="user-name"></span>
            <button id="logout-btn" class="btn btn-logout">Logout</button>
          </div>
          <div id="auth-links" class="auth-links">
            <a href="#/login" id="login-link" class="btn btn-login">Login</a>
            <a href="#/register" id="register-link" class="btn btn-register"
              >Sign Up</a
            >
          </div>
        </div>
      </div>
    </header>

    <div id="login-modal" class="modal" style="display: none">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Login</h2>
        <form id="login-form">
          <div class="form-group">
            <label for="email">Email</label>
            <input
              type="email"
              id="email"
              name="email"
              required
              placeholder="Enter your email"
            />
          </div>
          <div class="form-group">
            <label for="password">Password</label>
            <input
              type="password"
              id="password"
              name="password"
              required
              placeholder="Enter your password"
            />
          </div>
          <div id="login-error" class="form-error" style="display: none"></div>
          <button type="submit" class="btn btn-primary">Login</button>
        </form>
      </div>
    </div>

    <main id="main-content" class="main-content"></main>

    <footer class="app-footer">
      <p>&copy; 2025 Story Map</p>
    </footer>
  </body>
</html>
